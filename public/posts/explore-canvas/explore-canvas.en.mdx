---
slug: explore-canvas
title: Working with Canvas in React
tags:
  - react
  - canvas
  - konva
  - fabric
description: This post explains libraries for handling Canvas in React.
date: 2023-07-05
section: blog
series:
thumbnail: /public/posts/explore-canvas/konva-demo.png
draft: true
writer: leey00nsu
---

## Working with Canvas in React

### Konva.js vs Fabric.js

During this project, I needed features for drawing and erasing with a pen, as well as uploading image files and layering them.

Of course, I could implement all the features directly using the canvas API, but I decided to use libraries since they allow for safer and more efficient program development.

Both konva and fabric meet the intended purpose, so it doesn't matter which one I choose. Therefore, I will briefly try both libraries and compare them.

### Konva in React

In React, there is a library called [react-konva](https://github.com/konvajs/react-konva) that wraps `konva` for React.

You can implement it similarly to the konva documentation, but in a more React-like component style.

If you want to resize an object, you need to attach a separate transformer implementation to the object.

![konva-demo](/public/posts/explore-canvas/konva-demo.png)

```jsx title="konva"
import { Layer, Rect, Stage } from 'react-konva'

const SomeRect = () => {
  return <Rect x={20} y={20} width={50} height={50} fill="black" />
}

const App = () => {
  return (
    <Stage width={window.innerWidth} height={window.innerHeight}>
      <Layer>
        <SomeRect />
      </Layer>
    </Stage>
  )
}

export default App
```

### Fabric in React

There is a library that wraps `fabric` for React, but currently, it has errors in the TypeScript environment.

So, I will directly call and use fabric js.

Additionally, it has built-in transformers and select boxes for manipulating objects. (In konva, you need to implement this separately.)

The [official documentation](http://fabricjs.com/) is detailed, so you can implement it without much difficulty.

![fabric-demo](/public/posts/explore-canvas/fabric-demo.png)

```jsx title="fabric"
import { fabric } from 'fabric'
import { useEffect, useState } from 'react'

const App = () => {
  const [canvas, setCanvas] = (useState < fabric.Canvas) | (null > null)

  const initCanvas = () =>
    new fabric.Canvas('canvas', {
      height: 800,
      width: 800,
      backgroundColor: 'gray',
    })

  useEffect(() => {
    const newCanvas = initCanvas()
    setCanvas(newCanvas)

    return () => {
      newCanvas.dispose() // Clears the canvas when unmounted.
    }
  }, [])

  const addRect = () => {
    if (canvas) {
      const rect = new fabric.Rect({
        width: 200,
        height: 200,
        fill: 'yellow',
      })

      canvas.add(rect)
      canvas.renderAll()
    }
  }

  return (
    <div>
      <button onClick={addRect}>Add Rect</button>
      <canvas id="canvas" />
    </div>
  )
}

export default App
```

### Conclusion

I implemented both methods, and both libraries have similar functionalities based on the `Canvas API`.

However, one of the advantages of `fabric` is that it allows you to implement `selectbox` and `transformer` **with minimal effort.**

Currently, the project uses konva, but if I were to implement the same functionality again, I would consider using fabric.